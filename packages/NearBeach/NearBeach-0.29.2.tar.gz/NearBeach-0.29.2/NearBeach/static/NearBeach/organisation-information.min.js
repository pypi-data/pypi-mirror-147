"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4093],{3744:(o,e)=>{e.Z=(o,e)=>{const a=o.__vccOpts||o;for(const[o,n]of e)a[o]=n;return a}},2374:(o,e,a)=>{a.r(e),a.d(e,{default:()=>Z});var n=a(6252),t=a(9963);const i={class:"card"},s={class:"card-body"},r=(0,n._)("h1",null,"Organisation Information",-1),l=(0,n._)("hr",null,null,-1),d={class:"row"},u=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Please Note"),(0,n._)("p",{class:"text-instructions"}," Please only use generic information for both the website and email. Do not use any personal details - you can create contacts in the section below. ")],-1),g={class:"col-md-3"},c=["src"],m=(0,n._)("br",null,null,-1),_=(0,n._)("button",{class:"btn btn-primary"},"Update Profile...",-1),h={class:"col-md-5"},p={class:"form-group"},M={for:"id_organisation_name"},f=(0,n.Uk)(" Organisation Name "),v={key:0,class:"error"},E=(0,n._)("br",null,null,-1),b={class:"form-group"},w={for:"id_organisation_website"},y=(0,n.Uk)(" Organisation Website "),I={key:0,class:"error"},k=(0,n._)("br",null,null,-1),O={class:"form-group"},S={for:"id_organisation_email"},U=(0,n.Uk)(" Organisation Email "),N={key:0,class:"error"},T=(0,n._)("br",null,null,-1),L=(0,n._)("hr",null,null,-1),$={class:"row submit-row"},q={class:"col-md-12"};var B=a(9669),C=a.n(B),P=a(4250),R=a(3766),A=a(2587),D=a(3058),x=a(8416);const W={name:"OrganisationInformation",setup:()=>({v$:(0,R.ZP)()}),props:{organisationResults:{type:Array,default:()=>[]}},mixins:[D.Z,x.Z],computed:{...(0,P.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},data(){return{organisationNameModel:this.organisationResults[0].fields.organisation_name,organisationEmailModel:this.organisationResults[0].fields.organisation_email,organisationWebsiteModel:this.organisationResults[0].fields.organisation_website}},validations:{organisationNameModel:{required:A.C1,maxLength:(0,A.BS)(255)},organisationWebsiteModel:{required:A.C1,url:A.HQ},organisationEmailModel:{required:A.C1,email:A.Do}},methods:{updateOrganisation:function(){if(this.v$.$touch(),this.v$.$invalid)return void this.showValidationErrorModal();const o=new FormData;o.set("organisation_name",this.organisationNameModel),o.set("organisation_email",this.organisationEmailModel),o.set("organisation_website",this.organisationWebsiteModel),this.showLoadingModal("Organisation"),C().post(`${this.rootUrl}organisation_information/${this.organisationResults[0].pk}/save/`,o).then((o=>{this.closeLoadingModal()})).catch((o=>{this.showErrorModal(o,"organisation",this.organisationResults[0].pk)}))}}},Z=(0,a(3744).Z)(W,[["render",function(o,e,a,B,C,P){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",s,[(0,n.kq)(" TITLE "),r,l,(0,n.kq)(" FIELDS SECTION "),(0,n._)("div",d,[u,(0,n._)("div",g,[(0,n._)("img",{src:`${o.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,alt:"No Profile Picture",class:"organisation-profile-image"},null,8,c),m,_]),(0,n._)("div",h,[(0,n.kq)(" ORGANISATION NAME "),(0,n._)("div",p,[(0,n._)("label",M,[f,B.v$.organisationNameModel.$error.length>0?((0,n.wg)(),(0,n.iD)("span",v," Please suppy a title. ")):(0,n.kq)("v-if",!0)]),(0,n.wy)((0,n._)("input",{id:"id_organisation_name","onUpdate:modelValue":e[0]||(e[0]=o=>C.organisationNameModel=o),type:"text",class:"form-control"},null,512),[[t.vModelText,C.organisationNameModel]])]),E,(0,n.kq)(" ORGANISATION WEBSITE "),(0,n._)("div",b,[(0,n._)("label",w,[y,B.v$.organisationWebsiteModel.$error.length>0?((0,n.wg)(),(0,n.iD)("span",I," Please supply a properly formatted URL ")):(0,n.kq)("v-if",!0)]),(0,n.wy)((0,n._)("input",{id:"id_organisation_website","onUpdate:modelValue":e[1]||(e[1]=o=>C.organisationWebsiteModel=o),type:"text",class:"form-control"},null,512),[[t.vModelText,C.organisationWebsiteModel]])]),k,(0,n.kq)(" ORGANISATION EMAIL "),(0,n._)("div",O,[(0,n._)("label",S,[U,B.v$.organisationEmailModel.$error.length>0?((0,n.wg)(),(0,n.iD)("span",N," Please supply a valid Email ")):(0,n.kq)("v-if",!0)]),(0,n.wy)((0,n._)("input",{id:"id_organisation_email","onUpdate:modelValue":e[2]||(e[2]=o=>C.organisationEmailModel=o),type:"text",class:"form-control"},null,512),[[t.vModelText,C.organisationEmailModel]])])])]),T,(0,n.kq)(" NEED TO APPLY PERMISSIONS "),(0,n.kq)(" Submit Button "),L,(0,n._)("div",$,[(0,n._)("div",q,[(0,n._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[3]||(e[3]=(...o)=>P.updateOrganisation&&P.updateOrganisation(...o))},"Update Organisation")])])])])}]])},3058:(o,e,a)=>{a.d(e,{Z:()=>t});var n=a(5169);const t={methods:{showErrorModal:function(o,e,a){new n.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${o}`,new n.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new n.u_(document.getElementById("errorModal")).show()}}}},8416:(o,e,a)=>{a.d(e,{Z:()=>t});var n=a(5169);const t={methods:{closeLoadingModal:function(){var o=new n.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{o.hide()}),1e3)},showLoadingModal:function(o){new n.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${o} details`}}}}}]);