"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8346],{2601:(e,t,o)=>{o.r(t),o.d(t,{default:()=>O});var s=o(6252),r=o(9963);const l={class:"card"},a={class:"card-body"},i=(0,s._)("h1",null,"Customer Information",-1),n=(0,s._)("hr",null,null,-1),d={class:"row"},u=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Please Note"),(0,s._)("p",{class:"text-instructions"}," Please fill out the following details. If the customer is not assigned an organisation, NearBeach will treat this customer as a freelancer. ")],-1),c={class:"col-md-8"},m={class:"row customer-profile-image"},g=["src"],h=(0,s._)("br",null,null,-1),p=(0,s._)("button",{class:"btn btn-primary"},"Update Profile...",-1),f=(0,s._)("br",null,null,-1),_={class:"row"},M={class:"form-group col-sm-3"},k=(0,s.Uk)(" Title: "),v={key:0,class:"error"},I={class:"form-group col-sm-4"},y=(0,s.Uk)(" First Name: "),w={key:0,class:"error"},S={class:"form-group col-sm-5"},Z=(0,s.Uk)(" Last Name: "),E={key:0,class:"error"},U=(0,s._)("hr",null,null,-1),L=(0,s._)("br",null,null,-1),b=(0,s._)("hr",null,null,-1),N={class:"row submit-row"},C={class:"col-md-12"};o(5169);var T=o(967),R=o(2843),q=o(3766),$=o(2587),F=o(3058),P=o(8416);const D=o(9669),x={name:"CustomerInformation",setup:()=>({v$:(0,q.ZP)()}),components:{NSelect:T.Z,StakeholderInformation:R.Z},props:{customerResults:{type:Array,default:function(){return[]}},defaultStakeholderImage:{type:String,default:""},organisationResults:{type:Array,default:function(){return[]}},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},titleList:{type:Array,default:function(){return[]}}},data(){return{customerEmailModel:this.customerResults[0].fields.customer_email,customerFirstNameModel:this.customerResults[0].fields.customer_first_name,customerLastNameModel:this.customerResults[0].fields.customer_last_name,customerTitleModel:this.customerResults[0].fields.customer_title,titleFixList:[]}},mixins:[F.Z,P.Z],validations:{customerEmailModel:{required:$.C1,email:$.Do},customerFirstNameModel:{required:$.C1},customerLastNameModel:{required:$.C1},customerTitleModel:{required:$.C1}},methods:{updateCustomer:function(){const e=new FormData;e.set("customer_email",this.customerEmailModel),e.set("customer_first_name",this.customerFirstNameModel),e.set("customer_last_name",this.customerLastNameModel),e.set("customer_title",this.customerTitleModel),this.showLoadingModal("Customer Information"),D.post(`${this.rootUrl}customer_information/${this.customerResults[0].pk}/save/`,e).then((e=>{this.closeLoadingModal()})).catch((e=>{this.showErrorModal(e,"customer",this.customerResults[0].pk)}))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.titleFixList=this.titleList.map((e=>({value:e.pk,label:e.fields.title})))}},O=(0,o(3744).Z)(x,[["render",function(e,t,o,T,R,q){const $=(0,s.up)("n-select"),F=(0,s.up)("stakeholder-information");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",a,[(0,s.kq)(" TITLE "),i,n,(0,s.kq)(" FIELDS SECTION "),(0,s._)("div",d,[u,(0,s._)("div",c,[(0,s._)("div",m,[(0,s.kq)(" PROFILE IMAGE "),(0,s._)("img",{src:`${o.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,alt:"No Profile Picture",class:"customer-profile-image"},null,8,g),h,p]),f,(0,s.kq)(" CUSTOMER INFORMATION "),(0,s._)("div",_,[(0,s._)("div",M,[(0,s._)("label",null,[k,!T.v$.customerTitleModel.required&&T.v$.customerTitleModel.$dirty?((0,s.wg)(),(0,s.iD)("span",v," Please supply ")):(0,s.kq)("v-if",!0)]),(0,s.Wm)($,{options:R.titleFixList,value:R.customerTitleModel,"onUpdate:value":t[0]||(t[0]=e=>R.customerTitleModel=e)},null,8,["options","value"])]),(0,s._)("div",I,[(0,s._)("label",null,[y,!T.v$.customerFirstNameModel.required&&T.v$.customerFirstNameModel.$dirty?((0,s.wg)(),(0,s.iD)("span",w," Please supply ")):(0,s.kq)("v-if",!0)]),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>R.customerFirstNameModel=e)},null,512),[[r.vModelText,R.customerFirstNameModel]])]),(0,s._)("div",S,[(0,s._)("label",null,[Z,!T.v$.customerLastNameModel.required&&T.v$.customerLastNameModel.$dirty?((0,s.wg)(),(0,s.iD)("span",E," Please supply ")):(0,s.kq)("v-if",!0)]),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>R.customerLastNameModel=e)},null,512),[[r.vModelText,R.customerLastNameModel]])])])])]),(0,s.kq)(" STAKEHOLDER ORGANISATION "),U,o.organisationResults.length>0?((0,s.wg)(),(0,s.j4)(F,{key:0,"organisation-results":o.organisationResults,"default-stakeholder-image":o.defaultStakeholderImage},null,8,["organisation-results","default-stakeholder-image"])):(0,s.kq)("v-if",!0),L,(0,s.kq)(" NEED TO APPLY PERMISSIONS "),(0,s.kq)(" Submit Button "),b,(0,s._)("div",N,[(0,s._)("div",C,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[3]||(t[3]=(...e)=>q.updateCustomer&&q.updateCustomer(...e))},"Update Customer")])])])])}]])},2843:(e,t,o)=>{o.d(t,{Z:()=>I});var s=o(6252),r=o(3577);const l={class:"row"},a=(0,s._)("div",{class:"col-md-4"},[(0,s._)("h2",null,"Stakeholder")],-1),i={class:"col-md-8 organisation-details"},n=["src"],d={class:"organisation-name"},u=["href"],c={class:"organisation-link"},m=(0,s.Uk)(" Website: "),g=["href"],h={class:"organisation-email"},p=(0,s.Uk)(" Email: "),f=["href"];var _=o(6542),M=o(5808),k=o(4250);const v={name:"StakeholderInformation",components:{Icon:_.JO},props:{defaultStakeholderImage:{type:String,default:""},organisationResults:{type:Array,default:()=>[]}},data(){return{stakeholderModel:this.organisationResults[0].fields}},mixins:[M.Z],computed:{...(0,k.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),getStakeholderImage:function(){return""===this.stakeholderModel.organisation_profile_picture?this.defaultStakeholderImage:this.stakeholderModel.organisation_profile_picture}}},I=(0,o(3744).Z)(v,[["render",function(e,t,o,_,M,k){const v=(0,s.up)("Icon");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.kq)(" Description "),a,(0,s._)("div",i,[(0,s._)("img",{src:k.getStakeholderImage,alt:"Stakeholder Logo",class:"organisation-image"},null,8,n),(0,s._)("div",d,[(0,s._)("a",{href:`${e.rootUrl}organisation_information/${o.organisationResults[0].pk}/`},(0,r.toDisplayString)(M.stakeholderModel.organisation_name),9,u)]),(0,s._)("div",c,[(0,s.Wm)(v,{icon:e.icons.linkOut},null,8,["icon"]),m,(0,s._)("a",{href:M.stakeholderModel.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,r.toDisplayString)(M.stakeholderModel.organisation_website),9,g)]),(0,s._)("div",h,[(0,s.Wm)(v,{icon:e.icons.mailIcon},null,8,["icon"]),p,(0,s._)("a",{href:`mailto:${M.stakeholderModel.organisation_email}`},(0,r.toDisplayString)(M.stakeholderModel.organisation_email),9,f)])])])}]])},3058:(e,t,o)=>{o.d(t,{Z:()=>r});var s=o(5169);const r={methods:{showErrorModal:function(e,t,o){new s.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new s.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new s.u_(document.getElementById("errorModal")).show()}}}},5808:(e,t,o)=>{o.d(t,{Z:()=>L});var s=o(3985),r=o(5555),l=o(1826),a=o(6443),i=o(1327),n=o(8521),d=o(1056),u=o(4324),c=o(9672),m=o(9867),g=o(1239),h=o(5004),p=o(1321),f=o(1216),_=o(5550),M=o(7702),k=o(7903),v=o(2606),I=o(3843),y=o(2393),w=o(3360),S=o(9714),Z=o(1323),E=o(2610),U=o(5968);const L={data:()=>({icons:{arrowUp:s.Z,bugIcon:r.Z,bxBriefcase:l.Z,cardChecklist:a.Z,clipboardIcon:i.Z,documentPdf:n.Z,documentText:d.Z,folderIcon:u.Z,groupPresentation:c.Z,imageIcon:m.Z,infoCircle:g.Z,linkIcon:h.Z,linkIcon2:p.Z,linkOut:f.Z,mailIcon:_.Z,microsoftExcel:M.Z,microsoftPowerpoint:k.Z,microsoftWord:v.Z,noteAdd:I.Z,objectStorage:y.Z,passwordIcon:w.Z,trashCan:S.Z,userIcon:Z.Z,usersIcon:E.Z,xCircle:U.Z}})}},8416:(e,t,o)=>{o.d(t,{Z:()=>r});var s=o(5169);const r={methods:{closeLoadingModal:function(){var e=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal:function(e){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}}}]);