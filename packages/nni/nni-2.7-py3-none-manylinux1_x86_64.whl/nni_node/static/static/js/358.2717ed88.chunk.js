"use strict";(self.webpackChunknni_webui=self.webpackChunknni_webui||[]).push([[358],{25118:function(e,t,s){var n=s(16449),a=s(97391),r=s.n(a),i=s(4512),o=s.n(i),l=s(22379),c=s(93272),m=s(63700),d=s(41772);const u=({value:e,hideTooltip:t})=>{const s=(0,n.useRef)(null);return n.createElement("div",null,n.createElement(l.h,{iconProps:{iconName:"Copy"},styles:{icon:[{fontSize:c.TS.small}]},onClick:t=>{t.stopPropagation(),o()(e),s.current&&s.current.show(),setTimeout((()=>{null!==s.current&&s.current.dismiss()}),1e3)},onMouseDown:e=>{e.stopPropagation()},onMouseUp:e=>{e.stopPropagation()}}),n.createElement(m.G,{hidden:t,content:"Copied",componentRef:s,delay:0,tooltipProps:{calloutProps:{styles:{beak:{background:d.he},beakCurtain:{background:d.he},calloutMain:{background:d.he}}}}}))};u.propTypes={value:r().string.isRequired,hideTooltip:r().bool},t.Z=u},66133:function(e,t,s){s.d(t,{D:function(){return o}});var n=s(16449),a=s(87578),r=s(89623),i=s(43926);s(42928);const o=()=>n.createElement(i.b.Consumer,null,(e=>n.createElement(a.K,{horizontal:!0,className:"panelTitle"},n.createElement(r.J,{iconName:e.icon}),n.createElement("span",null,e.text))))},43926:function(e,t,s){s.d(t,{b:function(){return n}});const n=s(16449).createContext({text:"",icon:""})},97358:function(e,t,s){s.r(t),s.d(t,{default:function(){return A}});var n=s(16449),a=s(87578),r=s(53102),i=s(12220),o=s(89623),l=s(37130),c=s(41772),m=s(4671);class d{experimentList=[];platform=[];errorMessage="";getExperimentList(){return this.experimentList}getPlatformList(){return this.platform}getExpErrorMessage(){return this.errorMessage}async init(){await(0,m.b6)(`${c.zU}/experiments-info`).then((e=>{const t=new Set;for(const s of e)void 0!==s.port&&"string"===typeof s.port&&(s.port=JSON.parse(s.port)),t.add(s.platform);this.experimentList=e.sort(((e,t)=>t.startTime-e.startTime)),this.platform=Array.from(t)})).catch((e=>{this.errorMessage=e.message}))}}var u=s(39564);function h(e,t){return void 0!==e&&void 0!==t&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}const p=(e,t,s)=>"string"===typeof e&&""!==e?s.filter((s=>s[t]===e)):Array.isArray(e)&&0!==e.length?s.filter((s=>e.includes(s[t]))):s;function f(e){return e.map((e=>({key:e,text:e})))}function S(e,t){return(0,m.Lc)(e,t.field,t.isDescend)}const E=180,g=139;var C=s(59655),N=s(13994),k=s(10046),v=s(20053),b=s(34546),x=s(81999);const y=()=>n.createElement("div",{className:"header"},n.createElement("div",{className:"headerCon"},n.createElement(a.K,{className:"nav",horizontal:!0},n.createElement(N.v,{grow:30,styles:{root:{minWidth:300,display:"flex",verticalAlign:"center"}}},n.createElement("span",{className:"desktop-logo"},b.qo),n.createElement("span",{className:"logoTitle"},"Neural Network Intelligence")),n.createElement(N.v,{grow:70,className:"navOptions"},n.createElement(a.K,{horizontal:!0,horizontalAlign:"end",tokens:x.s1,styles:x.uI},n.createElement(C.rU,{to:"/oview",className:"experiment"},n.createElement(k.Q,{iconProps:v.We,text:"Back to the experiment"})))))));var D=s(25118);class w extends n.Component{constructor(e){super(e)}render(){const{item:e}=this.props,t=window.location.hostname,s=window.location.protocol,r=null===e.prefixUrl?`${s}//${t}:${e.port}/oview`:`${s}//${t}:${e.port}/${this.formatPrefix(e.prefixUrl)}/oview`;return n.createElement(a.K,{horizontal:!0,className:"ellipsis idCopy"},"STOPPED"===e.status?n.createElement("div",{className:"idColor"},e.id):n.createElement("a",{href:r,className:"link toAnotherExp idColor",target:"_blank",rel:"noopener noreferrer"},e.id),n.createElement(D.Z,{value:e.id}))}formatPrefix(e){return e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e}}var P=w,L=s(87735),T=s(69713),W=s(57764);class R extends n.Component{constructor(e){super(e)}render(){const{platform:e,selectedStatus:t,selectedPlatform:s,selectedStartDate:a,selectedEndDate:r,selectStatus:l,selectPlatform:m,getSelectedData:d,setSearchSource:u}=this.props;return n.createElement(n.Fragment,null,n.createElement(L.L,{label:"Status",selectedKeys:t,multiSelect:!0,onChange:l.bind(this),placeholder:"Select an option",options:f(c.hh),className:"filter-condition-status"}),n.createElement(L.L,{label:"Platform",selectedKey:s,onChange:m.bind(this),placeholder:"Select an option",options:f(e),className:"filter-condition-platform"}),n.createElement(T.M,{label:"Start time",firstDayOfWeek:W.eO.Sunday,showMonthPickerAsOverlay:!0,placeholder:"Select a date...",ariaLabel:"Select a date",value:a,onSelectDate:d.bind(this,"start")}),n.createElement(T.M,{label:"End time",firstDayOfWeek:W.eO.Sunday,showMonthPickerAsOverlay:!0,placeholder:"Select a date...",ariaLabel:"Select a date",value:r,onSelectDate:d.bind(this,"end")}),n.createElement(i.a,{onClick:u.bind(this),className:"reset"},n.createElement(o.J,{iconName:"Refresh"}),n.createElement("span",{className:"margin"},"Reset")))}}var M=R,I=s(43926),z=s(66133);s(87208),s(42558),s(86022),s(12773),s(17900);const O={childrenGap:25};class K extends n.Component{constructor(e){super(e),this.state={platform:[],columns:this.columns,errorMessage:"",hideFilter:!0,searchInputVal:"",selectedStatus:[],selectedPlatform:"",source:[],originExperimentList:[],searchSource:[],sortInfo:{field:"",isDescend:!1}}}async componentDidMount(){const e=new d;await e.init();const t=e.getExperimentList();this.setState((()=>({source:t,originExperimentList:t,searchSource:t,platform:e.getPlatformList(),errorMessage:e.getExpErrorMessage()})))}render(){const{platform:e,hideFilter:t,selectedStatus:s,source:c,selectedPlatform:m,selectedStartDate:d,selectedEndDate:h,errorMessage:p}=this.state;return n.createElement(a.K,{className:"nni",style:{minHeight:window.innerHeight}},n.createElement(y,null),void 0!==p?n.createElement("div",{className:"warning"},n.createElement(u.Z,{info:p,typeInfo:"error"})):null,n.createElement(a.K,{className:"contentBox expBackground"},n.createElement(a.K,{className:"content",styles:{root:{minHeight:window.innerHeight-104}}},n.createElement(a.K,{className:"experimentList"},n.createElement(I.b.Provider,{value:{text:"All experiments",icon:"CustomList"}},n.createElement(z.D,null)),n.createElement(a.K,{className:"box",horizontal:!0},n.createElement("div",{className:"search"},n.createElement(r.R,{className:"search-input",placeholder:"Search the experiment by name or ID",onEscape:this.setOriginSource.bind(this),onClear:this.setOriginSource.bind(this),onChange:this.searchNameAndId.bind(this)})),n.createElement("div",{className:"filter"},n.createElement(i.a,{onClick:this.clickFilter.bind(this),className:`${t?null:"filter-button-open"}`},n.createElement(o.J,{iconName:"Equalizer"}),n.createElement("span",{className:"margin"},"Filter")))),n.createElement(a.K,{className:(t?"hidden":"")+" filter-condition",horizontal:!0,tokens:O},n.createElement(M,{platform:e,selectedStatus:s,selectedPlatform:m,selectedStartDate:d,selectedEndDate:h,selectStatus:this.selectStatus.bind(this),selectPlatform:this.selectPlatform.bind(this),getSelectedData:this.getSelectedData.bind(this),setSearchSource:this.setSearchSource.bind(this)})),n.createElement(l.W,{columns:this.columns,items:c,setKey:"set",compact:!0,selectionMode:0,className:"table"})))))}onColumnClick=(e,t)=>{const{columns:s,source:n}=this.state,a=s.slice(),r=a.filter((e=>t.key===e.key))[0];a.forEach((e=>{e===r?(r.isSortedDescending=!r.isSortedDescending,r.isSorted=!0):(e.isSorted=!1,e.isSortedDescending=!0)}));const i=(0,m.Lc)(n,r.fieldName,r.isSortedDescending);this.setState((()=>({columns:a,source:i,sortInfo:{field:r.fieldName,isDescend:r.isSortedDescending}})))};columns=[{name:"Name",key:"experimentName",fieldName:"experimentName",minWidth:g,maxWidth:E,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",null,e.experimentName)},{name:"ID",key:"id",fieldName:"id",minWidth:g,maxWidth:E,isResizable:!0,className:"tableHead leftTitle",data:"string",onColumnClick:this.onColumnClick,onRender:e=>n.createElement(P,{item:e})},{name:"Status",key:"status",fieldName:"status",minWidth:g,maxWidth:E,isResizable:!0,onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",{className:`${e.status} commonStyle`},e.status)},{name:"Port",key:"port",fieldName:"port",minWidth:124,maxWidth:150,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",{className:"STOPPED"===e.status?"gray-port":""},void 0!==e.port?e.port:"--")},{name:"Platform",key:"platform",fieldName:"platform",minWidth:124,maxWidth:150,isResizable:!0,data:"string",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",{className:"commonStyle"},e.platform)},{name:"Start time",key:"startTime",fieldName:"startTime",minWidth:154,maxWidth:210,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",null,(0,m.ZU)(e.startTime))},{name:"End time",key:"endTime",fieldName:"endTime",minWidth:154,maxWidth:210,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",null,(0,m.ZU)(e.endTime))}];clickFilter(e){const{hideFilter:t}=this.state;!0===!t&&this.setSearchSource(),this.setState((()=>({hideFilter:!t})))}setOriginSource(){let{originExperimentList:e}=this.state;const{sortInfo:t}=this.state;if(void 0!==e){e=this.commonSelectString(e,"");const s=S(e,t);this.setState((()=>({source:s})))}}searchNameAndId(e,t){const{originExperimentList:s,sortInfo:n}=this.state;if(void 0!==t){if(""===t)this.setOriginSource();else{const e=t.trim();let a=s.filter((t=>null!==t.experimentName&&t.experimentName.toLowerCase().includes(e.toLowerCase())||t.id.toLowerCase().includes(e.toLowerCase())));a=this.commonSelectString(a,"");const r=S(a,n);this.setState((()=>({source:r,searchSource:r})))}this.setState((()=>({searchInputVal:t.trim()})))}}commonSelectString=(e,t)=>{const{selectedStatus:s,selectedPlatform:n,selectedStartDate:a,selectedEndDate:r}=this.state;return"status"===t&&(e=p(n,"platform",e)),"platform"===t&&(e=p(s,"status",e)),""===t&&(e=Array.from(new Set([...p(n,"platform",e),...p(s,"status",e)]))),e=e.filter((e=>(void 0===a||h(new Date(e.startTime),a))&&(void 0===r||h(new Date(e.endTime),r))))};selectStatus=(e,t)=>{if(void 0!==t){const{searchSource:e,sortInfo:s,selectedStatus:n}=this.state,a=t.selected?[...n,t.key]:n.filter((e=>e!==t.key));let r=p(a,"status",e);r=this.commonSelectString(r,"status"),this.setState({selectedStatus:a,source:S(r,s)})}};selectPlatform=(e,t)=>{if(void 0!==t){const{searchSource:e,sortInfo:s}=this.state;let n=p(t.key,"platform",e);n=this.commonSelectString(n,"platform"),this.setState({selectedPlatform:t.key,source:S(n,s)})}};getSelectedData(e,t){if(null!==t&&void 0!==t){const{selectedStatus:s,selectedPlatform:n,selectedStartDate:a,selectedEndDate:r,searchSource:i,sortInfo:o}=this.state,l=""!==n;let c=p(s,"status",i);l&&(c=c.filter((e=>e.platform===n))),"start"===e?(c=c.filter((e=>h(new Date(e.startTime),t)&&(void 0===r||h(new Date(e.endTime),r)))),this.setState((()=>({source:S(c,o),selectedStartDate:t})))):(c=c.filter((e=>h(new Date(e.endTime),t)&&(void 0===a||h(new Date(e.startTime),a)))),this.setState((()=>({source:S(c,o),selectedEndDate:t}))))}}setSearchSource(){const{sortInfo:e,originExperimentList:t}=this.state;let{searchInputVal:s}=this.state,n=JSON.parse(JSON.stringify(t));s=s.trim(),""!==s&&(n=t.filter((e=>e.id.toLowerCase().includes(s.toLowerCase())||null!==e.experimentName&&e.experimentName.toLowerCase().includes(s.toLowerCase())))),this.setState((()=>({source:S(n,e),selectedStatus:[],selectedPlatform:"",selectedStartDate:void 0,selectedEndDate:void 0})))}}var A=K},17900:function(){},12773:function(){},42928:function(){}}]);
//# sourceMappingURL=358.2717ed88.chunk.js.map