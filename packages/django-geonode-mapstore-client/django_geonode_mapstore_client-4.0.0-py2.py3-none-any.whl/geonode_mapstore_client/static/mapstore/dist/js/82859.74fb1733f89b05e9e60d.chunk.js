(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[82859],{433528:(e,t,r)=>{"use strict";r.d(t,{gJ:()=>n,Oj:()=>o,jp:()=>i,CM:()=>a,DU:()=>u,aO:()=>c,v6:()=>l,K8:()=>f,IN:()=>s,zh:()=>p,AH:()=>b,Ub:()=>v,_9:()=>d,JB:()=>y,oh:()=>E,AY:()=>O,yi:()=>m,SW:()=>g,Hk:()=>R,iQ:()=>h,dY:()=>S,$:()=>T,_u:()=>w,gG:()=>A,DI:()=>D,dZ:()=>I,qw:()=>P,f$:()=>U,bZ:()=>_,$O:()=>F,sF:()=>G,Gk:()=>j,vO:()=>C,ut:()=>L,MK:()=>M,VV:()=>x,B8:()=>N,VM:()=>V,a3:()=>Y,Xp:()=>k,DA:()=>Z,sK:()=>W,yA:()=>B,r:()=>H,iB:()=>z,WB:()=>K,EH:()=>$,Yd:()=>J,Hg:()=>Q,Lz:()=>X,ye:()=>q,Jb:()=>ee,d:()=>te,fT:()=>re,Ib:()=>ne,Pl:()=>oe,UB:()=>ie,Uh:()=>ae,QT:()=>ue,oL:()=>ce,Ap:()=>le,KD:()=>fe,Z_:()=>se,Vw:()=>pe,sY:()=>be,kA:()=>ve,gr:()=>de,pX:()=>ye,F5:()=>Ee,MO:()=>Oe,dq:()=>me,DY:()=>ge,oO:()=>Re,uF:()=>he,a8:()=>Se,Pv:()=>Te,an:()=>we,lg:()=>Ae,nY:()=>De,nG:()=>Ie,lx:()=>Pe,$S:()=>Ue,gc:()=>_e,Uz:()=>Fe,fO:()=>Ge,$E:()=>je,cE:()=>Ce,JK:()=>Le,YV:()=>Me,t9:()=>xe,YG:()=>Ne,HT:()=>Ve,MY:()=>Ye,ve:()=>ke,hB:()=>Ze,Ox:()=>We,zd:()=>Be,aT:()=>He,VH:()=>ze,Yb:()=>Ke,Jr:()=>$e,pP:()=>Je,gL:()=>Qe});var n="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",u="FEATUREGRID:SET_SELECTION_OPTIONS",c="FEATUREGRID:TOGGLE_MODE",l="FEATUREGRID:TOGGLE_FEATURES_SELECTION",f="FEATUREGRID:FEATURES_MODIFIED",s="FEATUREGRID:NEW_FEATURE",p="FEATUREGRID:SAVE_CHANGES",b="FEATUREGRID:SAVING",v="FEATUREGRID:START_EDITING_FEATURE",d="FEATUREGRID:START_DRAWING_FEATURE",y="FEATUREGRID:DELETE_GEOMETRY",E="FEATUREGRID:DELETE_GEOMETRY_FEATURE",O="FEATUREGRID:SAVE_SUCCESS",m="FEATUREGRID:CLEAR_CHANGES",g="FEATUREGRID:SAVE_ERROR",R="FEATUREGRID:DELETE_SELECTED_FEATURES",h="SET_FEATURES",S="FEATUREGRID:SORT_BY",T="FEATUREGRID:SET_LAYER",w="QUERY:UPDATE_FILTER",A="FEATUREGRID:CHANGE_PAGE",D="FEATUREGRID:GEOMETRY_CHANGED",I="DOCK_SIZE_FEATURES",P="FEATUREGRID:TOGGLE_TOOL",U="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",_="ASK_CLOSE_FEATURE_GRID_CONFIRM",F="FEATUREGRID:OPEN_GRID",G="FEATUREGRID:CLOSE_GRID",j="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",C="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",L="FEATUREGRID:SET_PERMISSION",M="FEATUREGRID:DISABLE_TOOLBAR",x="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",N="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",V="FEATUREGRID:ADVANCED_SEARCH",Y="FEATUREGRID:ZOOM_ALL",k="FEATUREGRID:INIT_PLUGIN",Z="FEATUREGRID:SIZE_CHANGE",W="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",B="FEATUREGRID:HIDE_SYNC_POPOVER",H="FEATUREGRID:UPDATE_EDITORS_OPTIONS",z="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",K="FEATUREGRID:SET_SYNC_TOOL",$={EDIT:"EDIT",VIEW:"VIEW"},J="FEATUREGRID:START_SYNC_WMS",Q="FEATUREGRID:STOP_SYNC_WMS",X="STORE_ADVANCED_SEARCH_FILTER",q="LOAD_MORE_FEATURES",ee="FEATUREGRID:QUERY_RESULT",te="FEATUREGRID:SET_TIME_SYNC",re="FEATUREGRID:SET_PAGINATION";function ne(){return{type:W}}function oe(){return{type:B}}function ie(e,t){return{type:ee,features:e,pages:t}}function ae(e){return{type:X,filterObj:e}}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:k,options:e}}function ce(){return{type:j}}function le(){return{type:C}}function fe(e,t){return{type:o,features:e,append:t}}function se(e){return{type:n,options:e}}function pe(e){return{type:D,features:e}}function be(){return{type:v}}function ve(){return{type:d}}function de(e){return{type:i,features:e}}function ye(){return{type:y}}function Ee(e){return{type:E,features:e}}function Oe(){return{type:a}}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,r=e.showCheckbox;return{type:u,multiselect:t,showCheckbox:r}}function ge(e,t){return{type:S,sortBy:e,sortOrder:t}}function Re(e,t){return{type:A,page:e,size:t}}function he(e){return{type:T,id:e}}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:w,update:e,append:t}}function Te(e,t){return{type:P,tool:e,value:t}}function we(e,t,r){return{type:U,name:e,key:t,value:r}}function Ae(){return{type:c,mode:$.EDIT}}function De(){return{type:c,mode:$.VIEW}}function Ie(e,t){return{type:f,features:e,updated:t}}function Pe(e){return{type:s,features:e}}function Ue(){return{type:p}}function _e(){return{type:O}}function Fe(){return{type:R}}function Ge(){return{type:b}}function je(){return{type:m}}function Ce(){return{type:g}}function Le(){return{type:_}}function Me(){return{type:G}}function xe(){return{type:F}}function Ne(e){return{type:M,disabled:e}}function Ve(e){return{type:L,permission:e}}function Ye(){return{type:V}}function ke(){return{type:Y}}function Ze(){return{type:J}}function We(e,t){return{type:Z,size:e,dockProps:t}}var Be=function(e){return{type:q,pages:e}},He=function(e){return{type:x,activated:e}},ze=function(e){return{type:N,deactivated:e}},Ke=function(e){return{type:te,value:e}},$e=function(e){return{type:re,size:e}},Je=function(e){return{type:z,updateFilterAction:e}},Qe=function(e){return{type:K,syncWmsFilter:e}}},864152:(e,t,r)=>{"use strict";r.d(t,{Z:()=>pe});var n={};r.r(n),r.d(n,{getRecords:()=>z,testService:()=>J,textSearch:()=>K,validate:()=>$});var o={};r.r(o),r.d(o,{getRecords:()=>ae,parseUrl:()=>ie,textSearch:()=>ue});var i=r(659551),a=r(501157),u=r(603475),c=r(737275),l=r(505055),f=r.n(l),s=r(375875),p=r.n(s),b=r(227361),v=r.n(b),d=r(984596),y=r.n(d),E=r(233044),O=r(993201);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={},S=function(e,t){return e===t||"EPSG:3857"===e&&"EPSG:900913"===t||"EPSG:900913"===e&&"EPSG:3857"===t},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=y()(v()(e,"TileMapService.TileMaps.TileMap",[])),a=o.projection,u=v()(o,"options.service.allSRS"),c=i.map((function(t){var r=t.$,n=void 0===r?{}:r;return g(g({},n),{},{href:(0,E.cleanAuthParamsFromURL)(n.href),identifier:(0,E.cleanAuthParamsFromURL)(n.href),format:(0,O.A)(n.href),tmsUrl:(0,E.cleanAuthParamsFromURL)(e.url)})})).filter((function(e){var t=e.srs;return!(a&&!u)||S(t,a)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.srs,i=void 0===o?"":o;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:c.length,numberOfRecordsReturned:Math.min(r,c.length),nextRecord:t+Math.min(r,c.length)+1,records:c.filter((function(e,n){return n>=t-1&&n<t-1+r}))}},w=function(e){return e},A=function(e,t,r,n,o){var i=h[e];return i&&(new Date).getTime()<i.timestamp+1e3*(c.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(T(i.data,t,r,n,o))})):p().get(e).then((function(i){var a;return f().parseString(i.data,{explicitArray:!1},(function(t,r){a=g(g({},r),{},{url:e})})),h[e]={timestamp:(new Date).getTime(),data:a},T(a,t,r,n,o)}))},D=r(836882),I=r(49977),P=r.n(I),U=r(611847);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j="custom",C=function(e,t,r,n,o){var i,a,u,c=v()(o,"options.service"),l=[];if(c.provider&&c.provider!==j){var f=(i=c.provider,Object.keys(null!==(a=null===D.Z||void 0===D.Z||null===(u=D.Z[i])||void 0===u?void 0:u.variants)&&void 0!==a?a:{}));0===f.length?l.push({provider:"".concat(c.provider),title:"".concat(c.provider)}):l=f.map((function(e){return{provider:"".concat(c.provider,".").concat(e)}}))}else c.url&&(l=[F(F({},c),{},{title:c.title,type:"tileprovider",url:c.url,attribution:c.attribution,options:c.options||{},provider:j})]);return new Promise((function(e){e(function(e,t,r,n){var o=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(r,o.length)+1,records:i}}(l,t,r,n))}))};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function M(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){var t="function"==typeof Map?new Map:void 0;return x=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return N(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Y(n,e)},x(e)}function N(e,t,r){return N=V()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Y(o,r.prototype),o},N.apply(null,arguments)}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(i,e);var t,r,n,o=(t=i,r=V(),function(){var e,n=k(t);if(r){var o=k(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return M(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e)).name="ServiceValidationError",r.notification=t,r}return n=i,Object.defineProperty(n,"prototype",{writable:!1}),n}(x(Error)),W=function(e){return P().Observable.of(e)},B=function(e){return""===e.title||""===e.url?P().Observable.throw(new Z("Validation Error","catalog.notification.warningAddCatalogService")):P().Observable.of(e)},H=function(e){var t=e.parseUrl;return function(e){var r="catalog.notification.errorServiceUrl";return P().Observable.defer((function(){return p().get(t(e.url))})).catch((function(){throw new Z("Service Test error",r)})).switchMap((function(t){if(t.error||""===t.data)throw new Z("Service Test error",r);return P().Observable.of(e)}))}},z=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},u=a.service,c=void 0===u?{}:u;return"tms"===c.provider&&A(e,t,r,n,o),C(0,t,r,n,o)},K=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},u=a.service,c=void 0===u?{}:u;return"tms"===c.provider?A(e,t,r,n,o):C(0,t,r,n,o)},$=function(e){return"tms"===e.provider?B(e):function(e){var t,r=e.provider&&"custom"!==e.provider?!!e.provider:(t=e.url,(0,U.Nw)(t));if(e.title&&r)return I.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},J=function(e){return"tms"===e.provider?H({parseUrl:w})(e):function(e){return I.Observable.of(e)}(e)},Q=r(432420);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ne={},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=y()(v()(e,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])),i=o.map((function(t){var r=t.Name,n=t.Title,o=t.Abstract,i=t.DefaultSRS,a=t.OtherSRS,u=void 0===a?[]:a,c=t["ows:WGS84BoundingBox"],l=c["ows:LowerCorner"].split(" "),f=c["ows:UpperCorner"].split(" "),s={minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(f[0]),maxy:parseFloat(f[1])};return{featureType:t,type:"wfs",url:(0,E.cleanAuthParamsFromURL)(e.url),name:r,title:n,description:o,SRS:[i].concat(te(u)),defaultSRS:i,boundingBox:{bounds:s,crs:"EPSG:4326"}}})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.name,i=void 0===o?"":o,a=e.description;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())||-1!==a.toLowerCase().indexOf(n.toLowerCase())})),a=i.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:i.length,numberOfRecordsReturned:Math.min(r,a.length),nextRecord:t+Math.min(r,i.length)+1,records:a}},ie=Q.dN,ae=function(e,t,r,n,o){var i=ne[e];return i&&(new Date).getTime()<i.timestamp+1e3*(c.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(oe(i.data,t,r,n,o))})):(0,Q.FU)(e).then((function(i){var a;return f().parseString(i.data,{explicitArray:!1,stripPrefix:!0},(function(t,r){a=q(q({},r),{},{url:e})})),ne[e]={timestamp:(new Date).getTime(),data:a},oe(a,t,r,n,o)}))},ue=function(e,t,r,n,o){return ae(e,t,r,n,o)},ce=r(932354);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const pe={csw:fe({preprocess:W,validate:B,testService:H(i.ZP)},i.ZP),wfs:fe({preprocess:W,validate:B,testService:H(o)},o),wms:fe({preprocess:W,validate:B,testService:H(a.ZP)},a.ZP),tms:n,wmts:fe({preprocess:W,validate:B,testService:H(u.Z)},u.Z),backgrounds:fe({preprocess:W,validate:B,testService:H(ce.Z)},ce.Z)}},856175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>q});var n=r(49977),o=r(409669),i=r.n(o),a=r(737691),u=r.n(a),c=r(430647),l=r(91175),f=r.n(l),s=r(227361),p=r.n(s),b=r(313311),v=r.n(b),d=r(701469),y=r.n(d),E=r(747037),O=r.n(E),m=r(513218),g=r.n(m),R=r(3674),h=r.n(R),S=r(493220),T=r.n(S),w=r(682492),A=r.n(w),D=r(931273),I=r(580416),P=r(197395),U=r(782904),_=r(433528),F=r(921914),G=r(53001),j=r(788113),C=r(31935),L=r(308316),M=r(675110),x=r(576712),N=r(986267),V=r(737275),Y=r(624262),k=r(589919),Z=r(801550),W=["format","url","text","layerOptions"];function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const q=function(e){return{recordSearchEpic:function(t,r){return t.ofType(D.V3).switchMap((function(t){var o=t.format,i=t.url,a=t.startPosition,u=t.maxRecords,c=t.text,l=t.options,f=p()(l,"service.filter")||p()(l,"filter");return n.Observable.defer((function(){return e[o].textSearch(i,a,u,c,Q({options:l,filter:f},(0,j.HN)(r.getState())))})).switchMap((function(e){return e.error?n.Observable.of((0,D.m)(e)):n.Observable.of((0,D.nX)({url:i,startPosition:a,maxRecords:u,text:c},e))})).startWith((0,D.K4)(!0)).catch((function(e){return n.Observable.of((0,D.m)(e))}))}))},addLayersFromCatalogsEpic:function(t,r){return t.ofType(D.WX).filter((function(e){var t=e.layers,r=e.sources;return y()(t)&&y()(r)&&t.length&&t.length===r.length})).switchMap((function(t){var o=t.layers,i=t.sources,a=t.options,u=t.startPosition,c=void 0===u?1:u,l=t.maxRecords,s=void 0===l?4:l,b=r.getState(),v=(0,j.b6)(b),d=o.filter((function(e,t){return!!v[i[t]]||"object"===$(i[t])})).map((function(t,r){var u=p()(a,r,(0,j.bA)(b)),l=i[r],f="object"===$(l)?l:v[l],d=f.type.toLowerCase(),y=f.url,E=o[r];return n.Observable.defer((function(){return e[d].textSearch(y,c,s,E,Q(Q({},u),f)).catch((function(){return{results:[]}}))})).map((function(e){return Q(Q({},e),{},{format:d,url:y,text:E,layerOptions:u})}))}));return n.Observable.forkJoin(d).switchMap((function(e){return y()(e)&&e.length?n.Observable.of(e.map((function(e){var t=e.format,r=e.url,o=e.text,i=e.layerOptions,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,W),u=(0,L.Ps)(b),c=(0,x.eL)(t,a,i,u)||[],l=f()(c.filter((function(e){return e.identifier||e.name===o}))),s=(0,x.tW)(l),p=s.wms,v=s.wmts,d=s.wfs,y={},E={},O=(0,j.kS)(b);if(p){var m=(0,x.n0)(p.SRS);if(p.SRS.length>0&&!N.default.isAllowedSRS("EPSG:3857",m))return n.Observable.empty();y=(0,x.ll)(l,"wms",{removeParams:O,catalogURL:"csw"===t&&r?r+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+l.identifier:r},E)}else if(v){y={};var g=(0,x.n0)(v.SRS);if(v.SRS.length>0&&!N.default.isAllowedSRS("EPSG:3857",g))return n.Observable.empty();y=(0,x.ll)(l,"wmts",{removeParams:O},E)}else d?y=(0,x.LZ)(l):(0,x.FJ)(l).esri&&(y=(0,x.AD)(l,E));return l?[y,i]:[o]}))):n.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return O()(e[0])})).join(" "),r=[];return t&&(r=[(0,D.E9)(t)]),r=[].concat(H(r),H(e.filter((function(e){return g()(e[0])})).map((function(e){return(0,D.A4)(A()({},e[0],e[1]))})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},addLayerAndDescribeEpic:function(t,r){return t.ofType(D.r7).mergeMap((function(t){var o=t.layer,i=t.zoomToLayer,a=[],u=r.getState(),c=(0,M.l2)(u),l=(0,Y.R8)(o,c||[]);return a.push((0,I.A4)(Q(Q({},o),{},{id:l}))),i&&o.bbox&&a.push((0,Z.Px)(o.bbox.bounds,o.bbox.crs)),"wms"===o.type?n.Observable.defer((function(){return e.wms.describeLayers((0,Y.Hi)(o),o.name)})).switchMap((function(e){if(e){var t=v()(e,(function(e){return e.name===o.name}));if(t&&"WFS"===t.owsType){var r=V.ZP.filterUrlParams(V.ZP.cleanDuplicatedQuestionMarks(t.owsURL),(0,j.kS)(u));return n.Observable.of((0,I.He)(l,{search:{url:r,type:"wfs"}}))}}return n.Observable.empty()})).merge(n.Observable.from(a)).catch((function(e){return n.Observable.of((0,D.bu)(o,e))})):n.Observable.from(a)})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(t,r){return t.ofType(D.mh).switchMap((function(){var t=r.getState(),o=(0,j._S)(t);return n.Observable.of(o).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.preprocess)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.validate)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.testService)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(){return n.Observable.of((0,D.N3)(o),(0,P.Vp)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}))})).startWith((0,D.Rc)(!0)).catch((function(e){return n.Observable.of((0,P.vU)({exception:e,title:"notification.warning",message:e.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))})).concat(n.Observable.of((0,D.Rc)(!1)))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(D.$Y).switchMap((function(){var e=t.getState(),r=(0,j.Cb)(e),o=(0,j.b6)(e),i=o[r]?(0,P.Vp)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):(0,P.vU)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=(0,D.SU)(r);return o[r]?n.Observable.of(i,a):n.Observable.of(i)}))},openCatalogEpic:function(e){return e.ofType(U.At).filter((function(e){return"metadataexplorer"===e.control&&e.value})).switchMap((function(){return n.Observable.of((0,_.YV)(),(0,F.g)(),(0,F.aN)())}))},getMetadataRecordById:function(t,r){return t.ofType(D.UT).switchMap((function(t){var o=t.metadataOptions,a=void 0===o?{}:o,l=r.getState(),f=(0,M.Iz)(l);return n.Observable.defer((function(){return e.wms.getCapabilities((0,Y.Fh)(f))})).switchMap((function(t){var r=p()(t,"capability.layer.layer",[]),o=1===r.length?r[0].metadataURL:v()(r,(function(e){return e.name===f.name.split(":")[1]})),l=p()(v()(o,(function(e){return O()(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&("application/xml"===e.format||"text/xml"===e.format)})),"onlineResource.href"),s=p()(v()(o,(function(e){return O()(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&"text/html"===e.format})),"onlineResource.href"),b=v()(p()(a,"extractors",[]),(function(e){var t=e.properties,r=e.layersRegex,n=r?new RegExp(r):null;return g()(t)&&(!r||n.test(f.name))})),d=s?{metadataUrl:s}:{},y=n.Observable.defer((function(){return e.csw.getRecordById(f.catalogURL)})).switchMap((function(e){return e&&e.error?n.Observable.of((0,P.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,I.c9)(d,!1)):e&&e.dc?n.Observable.of((0,I.c9)(Q(Q({},d),e.dc),!1)):n.Observable.empty()})),E=n.Observable.defer((function(){return i().get(l,{headers:{Accept:"application/xml"}})})).pluck("data").map((function(e){return(new c.a).parseFromString(e)})).map((function(e){var t=u().useNamespaces(a.xmlNamespaces||{});return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return T()(r).reduce((function(r,o){var i,a=B(o,2),u=a[0],c=a[1];if(g()(c)&&O()(c.xpath)&&g()(c.properties)&&h()(c.properties).length>0)0===(i=t(c.xpath,n).map((function(t){return e(c.properties,t)}))).length&&(i=null);else{var l,f=t(c,n);1===f.length?i=null!==(l=p()(f[0],"nodeValue"))&&void 0!==l?l:p()(f[0],"childNodes[0].nodeValue"):f.length>1&&(i=f.map((function(e){return p()(e,"childNodes[0].nodeValue")})).filter((function(e){return!!e})))}return Q(Q({},r),i?X({},u,i):{})}),{})}(b.properties,e)})).switchMap((function(e){return n.Observable.of((0,I.c9)(Q(Q({},d),e),!1))}));return l&&b?E:f.catalogURL?y:n.Observable.of((0,I.c9)(d,!1))})).startWith((0,I.c9)({},!0)).catch((function(){return n.Observable.of((0,P.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,I.c9)({},!1))}))}))},autoSearchEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(D.CO).debounce((function(){var e=o(),t=(0,j.l2)(e);return n.Observable.timer(t)})).switchMap((function(e){var t=e.text,r=o(),i=(0,j.y)(r),a=(0,j.R7)(r),u=a.type,c=a.url,l=a.filter;return n.Observable.of((0,D.tt)({format:u,url:c,startPosition:1,maxRecords:i,text:t,options:{filter:l}}))}))},catalogCloseEpic:function(e,t){return e.ofType(D.ur).switchMap((function(){var e,r=t.getState(),o=(0,C.YL)(r),i=(0,j.b6)(r);return(e=n.Observable).of.apply(e,H([(0,U.pu)("metadataexplorer","enabled",!1,"group",null),(0,D.In)("view"),(0,D.ye)()].concat("backgroundSelector"===o?[(0,D.Dw)(f()(h()(i))),(0,G.vw)(!0)]:[])))}))},getSupportedFormatsEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(D.xM).filter((function(e){return(0,j.CK)(o())!==(null==e?void 0:e.url)})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=void 0===t?"":t;return n.Observable.defer((function(){return(0,x.T6)(r,!0)})).switchMap((function(e){return n.Observable.of((0,D.nx)(e,r))})).let((0,k.hP)((0,D.We)(!0),(0,D.We)(!1),(function(){return n.Observable.of((0,P.vU)({title:"layerProperties.format.error.title",message:"layerProperties.format.error.message"}),(0,D.We)(!1))})))}))},updateGroupSelectedMetadataExplorerEpic:function(e,t){return e.ofType(I.c7).filter((function(){return(0,j.$t)(t.getState())})).switchMap((function(e){var r=e.nodeType,o=e.id,i=t.getState(),a=0===(0,M.NP)(i).length||"group"!==r?"Default":o;return n.Observable.of((0,U.Xg)("metadataexplorer","group",a))}))}}}},38842:(e,t,r)=>{"use strict";r.d(t,{wk:()=>s,Yf:()=>p,c3:()=>b,fY:()=>v});var n=r(218721),o=r.n(n),i=r(227361),a=r.n(i),u=r(313311),c=r.n(u),l=r(22222),f=r(308316),s=function(e){return o()(e,"localConfig.localizedLayerStyles")},p=function(e){var t=a()(e,"localConfig.plugins.dashboard",[]),r=c()(t,(function(e){return"DashboardEditor"===e.name}))||{};return a()(r,"cfg.catalog.localizedLayerStyles",!1)},b=function(e){return a()(e,"localConfig.localizedLayerStyles.name","mapstore_language")},v=(0,l.P1)(s,b,f.KV,(function(e,t,r){var n=[];return e&&n.push({name:t,value:r}),n}))},993201:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(264721),o=r.n(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[0].split("@");if(t.length>1){var r=t[t.length-1];if(o()(["png","png8","jpeg","vnd.jpeg-png","gif"],r))return r}return null}}}]);