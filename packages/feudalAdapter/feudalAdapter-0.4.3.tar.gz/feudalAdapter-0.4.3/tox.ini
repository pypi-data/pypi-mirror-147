[tox]
minversion = 3.10.0
envlist =
  clean
  pylint,
  py37,
  py38,
  py39,
  py310
  report

[testenv]
deps = pytest
       -rrequirements.txt
       -rdevel-requirements.txt
setenv = LDF_ADAPTER_CONFIG = {toxinidir}/tests/feudal_adapter.conf
commands = pytest -v \
            --cov="ldf_adapter"       \
            --cov-append              \
            --cov-report=term-missing
usedevelop = true

[testenv:clean]
deps = coverage
skip_install = true
commands = coverage erase

[testenv:report]
deps = coverage
skip_install = true
commands =
    coverage report
    coverage html

[testenv:pylint]
deps = pylint>=2.6
commands = 
    pylint -E ldf_adapter

[testenv:docs]
deps =
	sphinx
commands =
	sphinx-build "{toxinidir}/doc/source" "{toxinidir}/doc/build"
	python -c 'import pathlib; print("Documentation available under file://\{0\}".format(pathlib.Path(r"{toxinidir}") / "doc" / "build" / "index.html"))'
