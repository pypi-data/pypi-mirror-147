var Je=Object.defineProperty,Ge=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var Ie=(l,e,t)=>e in l?Je(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Ce=(l,e)=>{for(var t in e||(e={}))Qe.call(e,t)&&Ie(l,t,e[t]);if(we)for(var t of we(e))Ve.call(e,t)&&Ie(l,t,e[t]);return l},Me=(l,e)=>Ge(l,Ke(e));import{S as H,i as N,s as X,e as I,I as L,a as p,b as k,q as R,j as y,C as Y,a5 as _e,E as P,a4 as A,c as F,r as Fe,m as B,a1 as Ze,g as C,a6 as $e,o as xe,F as et,u as S,v as E,x as b,y as v,z,t as ee,A as ne,B as le,k as he,K as Ae,H as Le,f as $,h as ue,L as tt,X as nt,G as ce}from"./index.bbdd6a1e.js";import{B as Oe}from"./Block.aea3d209.js";import{B as Ue,U as lt}from"./BlockLabel.23dd9fdc.js";import{C as it,i as at,I as st,W as rt}from"./Image.svelte_svelte_type_style_lang.a1bd319d.js";import{I as Se,M as ot}from"./ModifyUpload.71ccbaf3.js";import{E as on}from"./Image.106130ad.js";import"./_commonjsHelpers.80d8c10d.js";var te="./assets/image.45facf29.svg",Ee="./assets/sketch.8ee16a39.svg";function ut(l){let e,t;return{c(){e=I("img"),L(e.src,t=l[0])||p(e,"src",t),p(e,"alt","")},m(n,i){k(n,e,i),l[2](e)},p(n,[i]){i&1&&!L(e.src,t=n[0])&&p(e,"src",t)},i:R,o:R,d(n){n&&y(e),l[2](null)}}}function ct(l,e,t){let{image:n}=e,i;const o=Y();_e(()=>{const r=new it(i,{autoCropArea:1,cropend(){const s=r.getCroppedCanvas().toDataURL();o("crop",s)}});return o("crop",n),()=>{r.destroy()}});function a(r){P[r?"unshift":"push"](()=>{i=r,t(1,i)})}return l.$$set=r=>{"image"in r&&t(0,n=r.image)},[n,i,a]}class ft extends H{constructor(e){super(),N(this,e,ct,ut,X,{image:0})}}class ze{constructor(e,t){this.x=e,this.y=t}}class De extends ze{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new ze(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const dt=30;class _t{constructor({radius:e=dt,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new De(n.x,n.y),this.brush=new De(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function Te(l,e,t){const n=l.slice();return n[40]=e[t].name,n[41]=e[t].zIndex,n[42]=e,n[43]=t,n}function je(l){let e;return{c(){e=I("div"),e.textContent="Start drawing",p(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(t,n){k(t,e,n)},d(t){t&&y(e)}}}function Re(l){let e,t,n=l[40],i,o;const a=()=>l[14](e,n),r=()=>l[14](null,n);return{c(){e=I("canvas"),p(e,"key",t=l[40]),A(e,"display","block"),A(e,"position","absolute"),A(e,"z-index",l[41]),A(e,"width",l[0]+"px"),A(e,"height",l[1]+"px")},m(s,u){k(s,e,u),a(),i||(o=[F(e,"mousedown",l[40]==="interface"?l[6]:void 0),F(e,"mousemove",l[40]==="interface"?l[7]:void 0),F(e,"mouseup",l[40]==="interface"?l[8]:void 0),F(e,"mouseout",l[40]==="interface"?l[8]:void 0),F(e,"touchstart",l[40]==="interface"?l[6]:void 0),F(e,"touchmove",l[40]==="interface"?l[7]:void 0),F(e,"touchend",l[40]==="interface"?l[8]:void 0),F(e,"touchcancel",l[40]==="interface"?l[8]:void 0)],i=!0)},p(s,u){l=s,u[0]&1&&A(e,"width",l[0]+"px"),u[0]&2&&A(e,"height",l[1]+"px"),n!==l[40]&&(r(),n=l[40],a())},d(s){s&&y(e),r(),i=!1,Fe(o)}}}function ht(l){let e,t,n,i=!l[3]&&je(),o=l[5],a=[];for(let r=0;r<o.length;r+=1)a[r]=Re(Te(l,o,r));return{c(){e=I("div"),i&&i.c(),t=B();for(let r=0;r<a.length;r+=1)a[r].c();p(e,"class","touch-none relative"),A(e,"height","100%"),A(e,"width","100%"),A(e,"background-color",gt),Ze(()=>l[16].call(e))},m(r,s){k(r,e,s),i&&i.m(e,null),C(e,t);for(let u=0;u<a.length;u+=1)a[u].m(e,null);l[15](e),n=$e(e,l[16].bind(e))},p(r,s){if(r[3]?i&&(i.d(1),i=null):i||(i=je(),i.c(),i.m(e,t)),s[0]&487){o=r[5];let u;for(u=0;u<o.length;u+=1){const f=Te(r,o,u);a[u]?a[u].p(f,s):(a[u]=Re(f),a[u].c(),a[u].m(e,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},i:R,o:R,d(r){r&&y(e),i&&i.d(),xe(a,r),l[15](null),n()}}}let x=50,fe="#444",de="#aaa",gt="#FFF";function mt(l,e){return{x:l.x+(e.x-l.x)/2,y:l.y+(e.y-l.y)/2}}function pt(l,e,t){const n=Y();let{value:i}=e,o,a=400,r=400;const s=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let u={},f={},d=[],M=[],T=!0,O=!0,U=!1,h=!1,q=!1,D=null,G=null,W=null,K=null;_e(()=>{Object.keys(u).forEach(c=>{f[c]=u[c].getContext("2d")}),D=new _t({radius:x/1.5,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),G=x,K=new at((c,_)=>Pe(c,_)),K.observe(W),oe(),t(13,o=!0),window.setTimeout(()=>{const c=window.innerWidth/2,_=window.innerHeight/2;D.update({x:c-G/4,y:_},{both:!0}),D.update({x:c+G/4,y:_},{both:!1}),T=!0,O=!0,Q()},100)}),et(()=>{t(13,o=!1),K.unobserve(W)});function ie(){const c=M.slice(0,-1);Q(),se({lines:c}),ke()}let ae=()=>JSON.stringify({lines:M,width:a,height:r}),m=c=>{if(typeof c!="string")throw new Error("save_data needs to be of type string!");const{lines:_,width:g,height:w}=JSON.parse(c);if(!_||typeof _.push!="function")throw new Error("save_data.lines needs to be an array!");if(Q(),g===a&&w===r)se({lines:_});else{const j=a/g,J=r/w;se({lines:_.map(V=>Me(Ce({},V),{points:V.points.map(Z=>({x:Z.x*j,y:Z.y*J})),brush_radius:V.brush_radius}))})}},se=({lines:c})=>{c.forEach(_=>{const{points:g,brush_color:w,brush_radius:j}=_;be({points:g,brush_color:w,brush_radius:j}),d=g,ve()})},qe=c=>{c.preventDefault(),t(3,q=!0),h=!0;const{x:_,y:g}=me(c);c.touches&&c.touches.length>0&&D.update({x:_,y:g},{both:!0}),pe(_,g)},ge=c=>{c.preventDefault();const{x:_,y:g}=me(c);pe(_,g)},We=c=>{c.preventDefault(),ge(c),U=!1,h=!1,ve()},Pe=c=>{const _=ae();for(const g of c){const{width:w,height:j}=g.contentRect;re(u.interface,w,j),re(u.drawing,w,j),re(u.temp,w,j),oe({once:!0})}m(_)},re=(c,_,g)=>{c.width=_*3,c.height=g*3,c.style.width=_,c.style.height=g},me=c=>{const _=u.interface.getBoundingClientRect();let g=c.clientX,w=c.clientY;return c.changedTouches&&c.changedTouches.length>0&&(g=c.changedTouches[0].clientX,w=c.changedTouches[0].clientY),{x:g-_.left,y:w-_.top}},pe=(c,_)=>{D.update({x:c*3,y:_*3});const g=!D.isEnabled();(h&&!U||g&&h)&&(U=!0,d.push(D.brush.toObject())),U&&(d.push(D.brush.toObject()),be({points:d,brush_color:fe,brush_radius:x})),T=!0},be=({points:c,brush_color:_,brush_radius:g})=>{f.temp.lineJoin="round",f.temp.lineCap="round",f.temp.strokeStyle=_,f.temp.clearRect(0,0,f.temp.canvas.width,f.temp.canvas.height),f.temp.lineWidth=g;let w=c[0],j=c[1];f.temp.moveTo(j.x,j.y),f.temp.beginPath();for(var J=1,V=c.length;J<V;J++){var Z=mt(w,j);f.temp.quadraticCurveTo(w.x,w.y,Z.x,Z.y),w=c[J],j=c[J+1]}f.temp.lineTo(w.x,w.y),f.temp.stroke()},ve=()=>{if(d.length<2)return;M.push({points:[...d],brush_color:fe,brush_radius:x}),d.length=0;const c=u.temp.width,_=u.temp.height;f.drawing.drawImage(u.temp,0,0,c,_),f.temp.clearRect(0,0,c,_),ke()},ke=()=>{n("change",ye())};function Q(){t(3,q=!1),M=[],O=!0,f.drawing.clearRect(0,0,u.drawing.width,u.drawing.height),f.temp.clearRect(0,0,u.temp.width,u.temp.height),f.drawing.fillStyle="#FFFFFF",f.drawing.fillRect(0,0,u.drawing.width,u.drawing.height)}let oe=({once:c=!1}={})=>{if(T||O){const _=D.getPointerCoordinates(),g=D.getBrushCoordinates();He(f.interface,_,g),T=!1,O=!1}c||window.requestAnimationFrame(()=>{oe()})},He=(c,_,g)=>{c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.fillStyle=fe,c.arc(g.x,g.y,x/2,0,Math.PI*2,!0),c.fill(),c.beginPath(),c.fillStyle=de,c.arc(_.x,_.y,4,0,Math.PI*2,!0),c.fill(),D.isEnabled()&&(c.beginPath(),c.lineWidth=2,c.lineCap="round",c.setLineDash([2,4]),c.strokeStyle=de,c.stroke()),c.beginPath(),c.fillStyle=de,c.arc(g.x,g.y,2,0,Math.PI*2,!0),c.fill()};function ye(){return u.drawing.toDataURL("image/png")}function Ne(c,_){P[c?"unshift":"push"](()=>{u[_]=c,t(2,u)})}function Xe(c){P[c?"unshift":"push"](()=>{W=c,t(4,W)})}function Ye(){a=this.offsetWidth,r=this.offsetHeight,t(0,a),t(1,r)}return l.$$set=c=>{"value"in c&&t(9,i=c.value)},l.$$.update=()=>{l.$$.dirty[0]&8704&&o&&!i&&Q()},[a,r,u,q,W,s,qe,ge,We,i,ie,Q,ye,o,Ne,Xe,Ye]}class bt extends H{constructor(e){super(),N(this,e,pt,ht,X,{value:9,undo:10,clear:11,get_image_data:12},null,[-1,-1])}get undo(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get get_image_data(){return this.$$.ctx[12]}}var vt="./assets/undo.f4cff58b.svg",kt="./assets/clear.88e065e8.svg";function yt(l){let e,t,n,i,o;return t=new Se({props:{image:vt,alt:"undo sketch"}}),t.$on("click",l[1]),i=new Se({props:{image:kt,alt:"clear sketch"}}),i.$on("click",l[2]),{c(){e=I("div"),S(t.$$.fragment),n=B(),S(i.$$.fragment),p(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(a,r){k(a,e,r),E(t,e,null),C(e,n),E(i,e,null),o=!0},p:R,i(a){o||(b(t.$$.fragment,a),b(i.$$.fragment,a),o=!0)},o(a){v(t.$$.fragment,a),v(i.$$.fragment,a),o=!1},d(a){a&&y(e),z(t),z(i)}}}function wt(l){const e=Y();return[e,()=>e("undo"),()=>e("clear")]}class It extends H{constructor(e){super(),N(this,e,wt,yt,X,{})}}function Ct(l){let e,t,n,i,o,a,r,s,u;return{c(){e=I("div"),t=I("div"),n=I("button"),n.textContent="Save",i=B(),o=I("button"),o.textContent="Cancel",a=B(),r=I("div"),p(t,"class","image_editor_buttons"),p(e,"class","fixed w-screen h-screen top-0 left-0 bg-black bg-opacity-50 z-40 flex flex-col justify-center items-center")},m(f,d){k(f,e,d),C(e,t),C(t,n),C(t,i),C(t,o),C(e,a),C(e,r),l[6](r),s||(u=[F(n,"click",l[4]),F(o,"click",l[5])],s=!0)},p:R,i:R,o:R,d(f){f&&y(e),l[6](null),s=!1,Fe(u)}}}function Mt(l,e,t){let{value:n}=e,i,o;const a=Y();function r(){t(1,o=new st(i,{usageStatistics:!1,includeUI:{loadImage:{path:n,name:"Edit Image"},menuBarPosition:"left",uiSize:{width:"800px",height:"600px"}},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}))}_e(r);const s=()=>a("save",o.toDataURL()),u=()=>a("cancel");function f(d){P[d?"unshift":"push"](()=>{i=d,t(0,i)})}return l.$$set=d=>{"value"in d&&t(3,n=d.value)},[i,o,a,n,s,u,f]}class St extends H{constructor(e){super(),N(this,e,Mt,Ct,X,{value:3})}}function Et(l){let e,t;return{c(){e=I("img"),p(e,"class","w-full h-full object-contain svelte-i8mnhh"),L(e.src,t=l[0])||p(e,"src",t),p(e,"alt","")},m(n,i){k(n,e,i)},p(n,i){i&1&&!L(e.src,t=n[0])&&p(e,"src",t)},i:R,o:R,d(n){n&&y(e)}}}function zt(l){let e,t,n,i,o,a,r=l[7]==="edit"&&Be(l);return t=new ot({props:{editable:!0}}),t.$on("edit",l[19]),t.$on("clear",l[11]),{c(){r&&r.c(),e=B(),S(t.$$.fragment),n=B(),i=I("img"),p(i,"class","w-full h-full object-contain svelte-i8mnhh"),L(i.src,o=l[0])||p(i,"src",o),p(i,"alt","")},m(s,u){r&&r.m(s,u),k(s,e,u),E(t,s,u),k(s,n,u),k(s,i,u),a=!0},p(s,u){s[7]==="edit"?r?(r.p(s,u),u&128&&b(r,1)):(r=Be(s),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(ne(),v(r,1,1,()=>{r=null}),le()),(!a||u&1&&!L(i.src,o=s[0]))&&p(i,"src",o)},i(s){a||(b(r),b(t.$$.fragment,s),a=!0)},o(s){v(r),v(t.$$.fragment,s),a=!1},d(s){r&&r.d(s),s&&y(e),z(t,s),s&&y(n),s&&y(i)}}}function Dt(l){let e,t;return e=new ft({props:{image:l[0]}}),e.$on("crop",l[12]),{c(){S(e.$$.fragment)},m(n,i){E(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.image=n[0]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Tt(l){let e,t,n,i;const o=[Bt,Rt],a=[];function r(s,u){return s[2]==="upload"?0:s[2]==="webcam"?1:-1}return~(e=r(l))&&(t=a[e]=o[e](l)),{c(){t&&t.c(),n=he()},m(s,u){~e&&a[e].m(s,u),k(s,n,u),i=!0},p(s,u){let f=e;e=r(s),e===f?~e&&a[e].p(s,u):(t&&(ne(),v(a[f],1,1,()=>{a[f]=null}),le()),~e?(t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),b(t,1),t.m(n.parentNode,n)):t=null)},i(s){i||(b(t),i=!0)},o(s){v(t),i=!1},d(s){~e&&a[e].d(s),s&&y(n)}}}function jt(l){let e,t,n,i;e=new It({}),e.$on("undo",l[14]),e.$on("clear",l[15]);let o={value:l[0]};return n=new bt({props:o}),l[16](n),n.$on("change",l[12]),{c(){S(e.$$.fragment),t=B(),S(n.$$.fragment)},m(a,r){E(e,a,r),k(a,t,r),E(n,a,r),i=!0},p(a,r){const s={};r&1&&(s.value=a[0]),n.$set(s)},i(a){i||(b(e.$$.fragment,a),b(n.$$.fragment,a),i=!0)},o(a){v(e.$$.fragment,a),v(n.$$.fragment,a),i=!1},d(a){z(e,a),a&&y(t),l[16](null),z(n,a)}}}function Be(l){let e,t;return e=new St({props:{value:l[0]}}),e.$on("cancel",l[18]),e.$on("save",l[12]),{c(){S(e.$$.fragment)},m(n,i){E(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.value=n[0]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Rt(l){let e,t;return e=new rt({}),e.$on("capture",l[12]),{c(){S(e.$$.fragment)},m(n,i){E(e,n,i),t=!0},p:R,i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Bt(l){let e,t,n;function i(a){l[17](a)}let o={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[Ft]},$$scope:{ctx:l}};return l[9]!==void 0&&(o.dragging=l[9]),e=new lt({props:o}),P.push(()=>Ae(e,"dragging",i)),e.$on("load",l[10]),{c(){S(e.$$.fragment)},m(a,r){E(e,a,r),n=!0},p(a,r){const s={};r&2097264&&(s.$$scope={dirty:r,ctx:a}),!t&&r&512&&(t=!0,s.dragging=a[9],Le(()=>t=!1)),e.$set(s)},i(a){n||(b(e.$$.fragment,a),n=!0)},o(a){v(e.$$.fragment,a),n=!1},d(a){z(e,a)}}}function Ft(l){let e,t,n,i,o,a,r,s,u;return{c(){e=I("div"),t=$(l[4]),n=B(),i=I("span"),o=$("- "),a=$(l[5]),r=$(" -"),s=B(),u=$(l[6]),p(i,"class","text-gray-300 svelte-i8mnhh"),p(e,"class","flex flex-col svelte-i8mnhh")},m(f,d){k(f,e,d),C(e,t),C(e,n),C(e,i),C(i,o),C(i,a),C(i,r),C(e,s),C(e,u)},p(f,d){d&16&&ue(t,f[4]),d&32&&ue(a,f[5]),d&64&&ue(u,f[6])},d(f){f&&y(e)}}}function At(l){let e,t,n,i,o,a;e=new Ue({props:{image:l[2]==="canvas"?Ee:te,label:l[1]||(l[2]==="canvas"?"Sketch":"Image")}});const r=[jt,Tt,Dt,zt,Et],s=[];function u(f,d){return f[2]==="canvas"?0:f[0]===null?1:f[3]==="select"?2:f[3]==="editor"?3:4}return i=u(l),o=s[i]=r[i](l),{c(){S(e.$$.fragment),t=B(),n=I("div"),o.c(),p(n,"class","svelte-i8mnhh"),ee(n,"bg-gray-200",l[0]),ee(n,"h-60",l[2]!=="webcam")},m(f,d){E(e,f,d),k(f,t,d),k(f,n,d),s[i].m(n,null),a=!0},p(f,d){const M={};d&4&&(M.image=f[2]==="canvas"?Ee:te),d&6&&(M.label=f[1]||(f[2]==="canvas"?"Sketch":"Image")),e.$set(M);let T=i;i=u(f),i===T?s[i].p(f,d):(ne(),v(s[T],1,1,()=>{s[T]=null}),le(),o=s[i],o?o.p(f,d):(o=s[i]=r[i](f),o.c()),b(o,1),o.m(n,null)),d&1&&ee(n,"bg-gray-200",f[0]),d&4&&ee(n,"h-60",f[2]!=="webcam")},i(f){a||(b(e.$$.fragment,f),b(o),a=!0)},o(f){v(e.$$.fragment,f),v(o),a=!1},d(f){z(e,f),f&&y(t),f&&y(n),s[i].d()}}}function Lt(l){let e,t;return e=new Oe({props:{variant:l[0]===null&&l[2]==="upload"?"dashed":"solid",color:l[9]?"green":"grey",padding:!1,$$slots:{default:[At]},$$scope:{ctx:l}}}),{c(){S(e.$$.fragment)},m(n,i){E(e,n,i),t=!0},p(n,[i]){const o={};i&5&&(o.variant=n[0]===null&&n[2]==="upload"?"dashed":"solid"),i&512&&(o.color=n[9]?"green":"grey"),i&2098175&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Ot(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:o=""}=e,{source:a="upload"}=e,{tool:r="editor"}=e,{drop_text:s="Drop an image file"}=e,{or_text:u="or"}=e,{upload_text:f="click to upload"}=e,d="view",M;function T({detail:m}){t(0,n=m)}function O({detail:m}){t(0,n=null),h("clear")}function U({detail:m}){t(0,n=m),t(7,d="view"),h("edit")}const h=Y();let q=!1;const D=()=>M.undo(),G=()=>M.clear();function W(m){P[m?"unshift":"push"](()=>{M=m,t(8,M)})}function K(m){q=m,t(9,q)}const ie=()=>t(7,d="view"),ae=()=>t(7,d="edit");return l.$$set=m=>{"value"in m&&t(0,n=m.value),"label"in m&&t(1,i=m.label),"style"in m&&t(13,o=m.style),"source"in m&&t(2,a=m.source),"tool"in m&&t(3,r=m.tool),"drop_text"in m&&t(4,s=m.drop_text),"or_text"in m&&t(5,u=m.or_text),"upload_text"in m&&t(6,f=m.upload_text)},l.$$.update=()=>{l.$$.dirty&1&&h("change",n)},[n,i,a,r,s,u,f,d,M,q,T,O,U,o,D,G,W,K,ie,ae]}class Ut extends H{constructor(e){super(),N(this,e,Ot,Lt,X,{value:0,label:1,style:13,source:2,tool:3,drop_text:4,or_text:5,upload_text:6})}}function qt(l){let e,t;return{c(){e=I("img"),p(e,"class","w-full h-full object-contain"),L(e.src,t=l[0])||p(e,"src",t),p(e,"alt","")},m(n,i){k(n,e,i)},p(n,i){i&1&&!L(e.src,t=n[0])&&p(e,"src",t)},d(n){n&&y(e)}}}function Wt(l){let e,t,n;return{c(){e=I("div"),t=I("img"),L(t.src,n=te)||p(t,"src",n),p(t,"alt",""),p(t,"class","h-6 opacity-20"),p(e,"class","min-h-[16rem] flex justify-center items-center")},m(i,o){k(i,e,o),C(e,t)},p:R,d(i){i&&y(e)}}}function Pt(l){let e,t,n,i;e=new Ue({props:{image:te,label:l[1]||"Image"}});function o(s,u){return s[0]===null?Wt:qt}let a=o(l),r=a(l);return{c(){S(e.$$.fragment),t=B(),r.c(),n=he()},m(s,u){E(e,s,u),k(s,t,u),r.m(s,u),k(s,n,u),i=!0},p(s,u){const f={};u&2&&(f.label=s[1]||"Image"),e.$set(f),a===(a=o(s))&&r?r.p(s,u):(r.d(1),r=a(s),r&&(r.c(),r.m(n.parentNode,n)))},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){v(e.$$.fragment,s),i=!1},d(s){z(e,s),s&&y(t),r.d(s),s&&y(n)}}}function Ht(l){let e,t;return e=new Oe({props:{variant:"solid",color:"grey",padding:!1,$$slots:{default:[Pt]},$$scope:{ctx:l}}}),{c(){S(e.$$.fragment)},m(n,i){E(e,n,i),t=!0},p(n,[i]){const o={};i&19&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Nt(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:o=""}=e;const a=Y();return l.$$set=r=>{"value"in r&&t(0,n=r.value),"label"in r&&t(1,i=r.label),"style"in r&&t(2,o=r.style)},l.$$.update=()=>{l.$$.dirty&1&&n&&a("change",n)},[n,i,o]}class Xt extends H{constructor(e){super(),N(this,e,Nt,Ht,X,{value:0,label:1,style:2})}}function Yt(l){let e,t,n;function i(a){l[8](a)}let o={style:l[1],source:l[2],tool:l[3],label:l[4],drop_text:l[6]("interface.drop_image"),or_text:l[6]("or"),upload_text:l[6]("interface.click_to_upload")};return l[0]!==void 0&&(o.value=l[0]),e=new Ut({props:o}),P.push(()=>Ae(e,"value",i)),e.$on("edit",l[9]),e.$on("clear",l[10]),e.$on("change",l[11]),{c(){S(e.$$.fragment)},m(a,r){E(e,a,r),n=!0},p(a,r){const s={};r&2&&(s.style=a[1]),r&4&&(s.source=a[2]),r&8&&(s.tool=a[3]),r&16&&(s.label=a[4]),r&64&&(s.drop_text=a[6]("interface.drop_image")),r&64&&(s.or_text=a[6]("or")),r&64&&(s.upload_text=a[6]("interface.click_to_upload")),!t&&r&1&&(t=!0,s.value=a[0],Le(()=>t=!1)),e.$set(s)},i(a){n||(b(e.$$.fragment,a),n=!0)},o(a){v(e.$$.fragment,a),n=!1},d(a){z(e,a)}}}function Jt(l){let e,t;return e=new Xt({props:{value:l[0],label:l[4],style:l[1]}}),{c(){S(e.$$.fragment)},m(n,i){E(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.value=n[0]),i&16&&(o.label=n[4]),i&2&&(o.style=n[1]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function Gt(l){let e,t,n,i;const o=[Jt,Yt],a=[];function r(s,u){return s[5]==="static"?0:1}return e=r(l),t=a[e]=o[e](l),{c(){t.c(),n=he()},m(s,u){a[e].m(s,u),k(s,n,u),i=!0},p(s,[u]){let f=e;e=r(s),e===f?a[e].p(s,u):(ne(),v(a[f],1,1,()=>{a[f]=null}),le(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),b(t,1),t.m(n.parentNode,n))},i(s){i||(b(t),i=!0)},o(s){v(t),i=!1},d(s){a[e].d(s),s&&y(n)}}}function Kt(l,e,t){let n;tt(l,nt,h=>t(6,n=h));let{value:i=null}=e,{default_value:o=null}=e,{style:a=""}=e,{source:r="upload"}=e,{tool:s="editor"}=e,{label:u}=e,{mode:f}=e;const d=Y();o&&(i=o);function M(h){i=h,t(0,i)}function T(h){ce.call(this,l,h)}function O(h){ce.call(this,l,h)}function U(h){ce.call(this,l,h)}return l.$$set=h=>{"value"in h&&t(0,i=h.value),"default_value"in h&&t(7,o=h.default_value),"style"in h&&t(1,a=h.style),"source"in h&&t(2,r=h.source),"tool"in h&&t(3,s=h.tool),"label"in h&&t(4,u=h.label),"mode"in h&&t(5,f=h.mode)},l.$$.update=()=>{l.$$.dirty&1&&d("change")},[i,a,r,s,u,f,n,o,M,T,O,U]}class Qt extends H{constructor(e){super(),N(this,e,Kt,Gt,X,{value:0,default_value:7,style:1,source:2,tool:3,label:4,mode:5})}}var ln=Qt;const an=["static","dynamic"];export{ln as Component,on as ExampleComponent,an as modes};
